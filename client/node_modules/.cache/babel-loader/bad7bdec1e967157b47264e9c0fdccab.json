{"ast":null,"code":"import _regeneratorRuntime from\"/Users/therealstephen/personal-projects/iou-tracker-client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/therealstephen/personal-projects/iou-tracker-client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useContext}from\"react\";import{userContext}from\"../../../../store/userStore\";import{useParams}from\"react-router-dom\";import{lineItemContext}from\"../../../../store/lineItemStore\";import{invoiceContext}from\"../../../../store/invoiceStore\";import\"./InvoiceModal.css\";import BillFrom from\"./BillFrom\";import BillTo from\"./BillTo\";import InvoiceDetails from\"./InvoiceDetails\";import ItemInForm from\"./ItemInForm\";import InvoiceFooter from\"../../../InvoiceFooter\";import LoginButton from\"../../LoginButton\";import createNewInvoice from\"../../../../api/createInvoice\";import editInvoice from\"../../../../api/editInvoice\";import GoBack from\"../../../GoBack\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function InvoiceModal(){var _useContext=useContext(userContext),state=_useContext.state,dispatch=_useContext.dispatch;var _useContext2=useContext(lineItemContext),lineItemState=_useContext2.lineItemState,updateLineItem=_useContext2.updateLineItem;var _useContext3=useContext(invoiceContext),invoiceState=_useContext3.invoiceState,updateInvoice=_useContext3.updateInvoice;var _useParams=useParams(),id=_useParams.id;//Adds another component for additional line items to be entered\nfunction newLineClickHandler(){updateLineItem({type:\"ADD_NEW_LINE\"});}//Lists out all line items and displays them on modal\nvar listOfLineItems=lineItemState.lineItems.map(function(line,index){return/*#__PURE__*/_jsx(ItemInForm,{index:index},index);});//Utilizes api function to store a new invoice. Default status is pending.\nfunction submitInvoice(_x){return _submitInvoice.apply(this,arguments);}function _submitInvoice(){_submitInvoice=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var status;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:status=\"Pending\";if(!(e.target.textContent===\"Discard\")){_context.next=6;break;}dispatch({type:\"CLOSE_MODAL\"});updateLineItem({type:\"RESET\"});updateInvoice({type:\"RESET\"});return _context.abrupt(\"return\");case 6:if(!invoiceState.editingInvoice){_context.next=13;break;}_context.next=9;return editInvoice(invoiceState.selectedInvoice);case 9:updateLineItem({type:\"RESET\"});updateInvoice({type:\"RESET\"});dispatch({type:\"CLOSE_MODAL\"});return _context.abrupt(\"return\");case 13:if(e.target.textContent===\"Save as Draft\"){status=\"Draft\";}_context.next=16;return createNewInvoice(invoiceState,lineItemState,status);case 16:updateLineItem({type:\"RESET\"});updateInvoice({type:\"RESET\"});dispatch({type:\"CLOSE_MODAL\"});case 19:case\"end\":return _context.stop();}}},_callee);}));return _submitInvoice.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:\"invoice-overlay\",children:/*#__PURE__*/_jsx(\"div\",{className:\"invoice-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content-container\",children:[/*#__PURE__*/_jsx(GoBack,{}),/*#__PURE__*/_jsx(\"p\",{className:\"new-invoice-text\",children:invoiceState.selectedInvoice.id?\"Edit #IOU\".concat(invoiceState.selectedInvoice.id):\"New Invoice\"}),/*#__PURE__*/_jsx(BillFrom,{}),/*#__PURE__*/_jsx(BillTo,{}),/*#__PURE__*/_jsx(InvoiceDetails,{}),id?null:/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"item-list-header\",children:\"Item List\"}),listOfLineItems,/*#__PURE__*/_jsxs(\"button\",{onClick:newLineClickHandler,className:\"add-item\",children:[\"+ Add New Item\",\" \"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"gradient\"}),/*#__PURE__*/_jsx(\"div\",{className:\"filler\"}),/*#__PURE__*/_jsxs(InvoiceFooter,{children:[/*#__PURE__*/_jsx(LoginButton,{onClick:submitInvoice,classes:\"invoice-footer-btn discard\",children:\"Discard\"}),/*#__PURE__*/_jsx(LoginButton,{onClick:submitInvoice,classes:\"invoice-footer-btn draft\",children:\"Save as Draft\"}),/*#__PURE__*/_jsx(LoginButton,{onClick:submitInvoice,classes:\"active invoice-footer-btn\",children:\"Save & Send\"})]})]})})});}export default InvoiceModal;","map":{"version":3,"sources":["/Users/therealstephen/personal-projects/iou-tracker-client/src/components/UI/Modals/New-Invoice-Modal/InvoiceModal.js"],"names":["React","useContext","userContext","useParams","lineItemContext","invoiceContext","BillFrom","BillTo","InvoiceDetails","ItemInForm","InvoiceFooter","LoginButton","createNewInvoice","editInvoice","GoBack","InvoiceModal","state","dispatch","lineItemState","updateLineItem","invoiceState","updateInvoice","id","newLineClickHandler","type","listOfLineItems","lineItems","map","line","index","submitInvoice","e","status","target","textContent","editingInvoice","selectedInvoice"],"mappings":"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","sourcesContent":["import React, { useContext } from \"react\";\nimport { userContext } from \"../../../../store/userStore\";\nimport { useParams } from \"react-router-dom\";\nimport { lineItemContext } from \"../../../../store/lineItemStore\";\nimport { invoiceContext } from \"../../../../store/invoiceStore\";\nimport \"./InvoiceModal.css\";\n\nimport BillFrom from \"./BillFrom\";\nimport BillTo from \"./BillTo\";\nimport InvoiceDetails from \"./InvoiceDetails\";\nimport ItemInForm from \"./ItemInForm\";\nimport InvoiceFooter from \"../../../InvoiceFooter\";\nimport LoginButton from \"../../LoginButton\";\nimport createNewInvoice from \"../../../../api/createInvoice\";\nimport editInvoice from \"../../../../api/editInvoice\";\nimport GoBack from \"../../../GoBack\";\n\nfunction InvoiceModal() {\n  const { state, dispatch } = useContext(userContext);\n  const { lineItemState, updateLineItem } = useContext(lineItemContext);\n  const { invoiceState, updateInvoice } = useContext(invoiceContext);\n  const { id } = useParams();\n\n  //Adds another component for additional line items to be entered\n  function newLineClickHandler() {\n    updateLineItem({ type: \"ADD_NEW_LINE\" });\n  }\n\n  //Lists out all line items and displays them on modal\n  const listOfLineItems = lineItemState.lineItems.map((line, index) => {\n    return <ItemInForm index={index} key={index} />;\n  });\n\n  //Utilizes api function to store a new invoice. Default status is pending.\n  async function submitInvoice(e) {\n    let status = \"Pending\";\n    if (e.target.textContent === \"Discard\") {\n      dispatch({ type: \"CLOSE_MODAL\" });\n      updateLineItem({ type: \"RESET\" });\n      updateInvoice({ type: \"RESET\" });\n      return;\n    }\n\n    //Checks for editing to hit a different end point on the server\n    if (invoiceState.editingInvoice) {\n      await editInvoice(invoiceState.selectedInvoice);\n      updateLineItem({ type: \"RESET\" });\n      updateInvoice({ type: \"RESET\" });\n      dispatch({ type: \"CLOSE_MODAL\" });\n      return;\n    }\n\n    if (e.target.textContent === \"Save as Draft\") {\n      status = \"Draft\";\n    }\n    await createNewInvoice(invoiceState, lineItemState, status);\n    updateLineItem({ type: \"RESET\" });\n    updateInvoice({ type: \"RESET\" });\n    dispatch({ type: \"CLOSE_MODAL\" });\n  }\n\n  return (\n    <div className=\"invoice-overlay\">\n      <div className=\"invoice-card\">\n        <div className=\"content-container\">\n          <GoBack />\n          <p className=\"new-invoice-text\">\n            {invoiceState.selectedInvoice.id\n              ? `Edit #IOU${invoiceState.selectedInvoice.id}`\n              : \"New Invoice\"}\n          </p>\n          <BillFrom />\n          <BillTo />\n          <InvoiceDetails />\n          {id ? null : (\n            <React.Fragment>\n              <p className=\"item-list-header\">Item List</p>\n              {listOfLineItems}\n              <button onClick={newLineClickHandler} className=\"add-item\">\n                + Add New Item{\" \"}\n              </button>\n            </React.Fragment>\n          )}\n          <div className=\"gradient\"></div>\n          <div className=\"filler\"></div>\n\n          <InvoiceFooter>\n            <LoginButton\n              onClick={submitInvoice}\n              classes={\"invoice-footer-btn discard\"}\n            >\n              Discard\n            </LoginButton>\n            <LoginButton\n              onClick={submitInvoice}\n              classes={\"invoice-footer-btn draft\"}\n            >\n              Save as Draft\n            </LoginButton>\n            <LoginButton\n              onClick={submitInvoice}\n              classes={\"active invoice-footer-btn\"}\n            >\n              Save & Send\n            </LoginButton>\n          </InvoiceFooter>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default InvoiceModal;\n"]},"metadata":{},"sourceType":"module"}